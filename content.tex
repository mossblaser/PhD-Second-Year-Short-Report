\section{Introduction}

The human brain is the subject of intense research and, in particular, the
construction of large-scale models of brain function continues to be an
important part of this. These models essentially consist of a directed graph of
`neurons' (with simple, well defined behaviour) which communicate with connected
neurons by transmitting valueless `spikes'. Models built in this way, such as
`Spaun' \cite{eliasmith12}, are capable of reproducing high- and low-level
properties of the human brain such as recognising digits and solving logical
problems. As models grow in scale to human scales of tens of billions of neurons
\cite{williams88} each with thousands of outgoing connections \cite{kung88},
models have proven slow to run and so specialised computer architectures have
been developed. These machines combine often unconventional processing elements
with specialised interconnection networks. It is the enhancement of these
interconnection networks which forms the basis of this project. In this work,
the `SpiNNaker' \cite{furber07} neural simulator will be used as a platform for
experimental work thanks to its accessibility and flexibility.


\section{SpiNNaker}
	
	\begin{figure}
		\center
		\input{figures/spinnaker-abstractions}
		
		\caption{Construction of the largest planned SpiNNaker machine.}
		\label{fig:spinnaker-abstractions}
	\end{figure}
	
	SpiNNaker is a hardware platform which combines low-power mobile-phone grade
	CPU cores interconnected by a custom, high-performance interconnection network
	to simulate large networks of neurons in real-time. The largest planned
	machine, which is in the final stages of manufacturing, is designed to
	simulate one billion ($10^9$) neurons in biological realtime
	\cite{navaridas09} and will fill ten server-room cabinets as described in
	figure \ref{fig:spinnaker-abstractions}.
	
	Between chips on the same board asynchronous, parallel signalling is used with
	groups of 16 wires required to communicate data between neighbouring chips
	\cite{bainbridge02}. This technique only consumes energy when the link is in
	use. Between different boards, connecting this many wires would be
	prohibitively expensive and so a different technology, High-Speed Serial
	(HSS), is used \cite{athavale05}. HSS links can support high bandwidths and in
	SpiNNaker, one board-to-board HSS link carries the load of eight asynchronous
	links.  Unfortunately, HSS links consume energy at the same rate when loaded
	and idle; to reduce power the links must be operated at a lower speed.
	
	In `spikes' are produced by neurons at unpredictable rates, it is hard to
	determine exactly how fast such a link must operate ahead of time.  In
	conventional applications, HSS links change speed dynamically depending on
	load \cite{infinibandta08} however, for neural simulations operating at
	biological real-time, the 1 ms pause introduced during link speed changes
	\cite{xilinx14} would cause the simulation to fail. As a result in the current
	generation of neural simulators using HSS, links operate at full speed at all
	times.
	
	This project hopes to develop a new architecture for neural simulator
	interconnection networks which both allows link speed changes without breaking
	simulations and while also further reducing the network load. Since
	SpiNNaker's HSS board-to-board links are implemented by reconfigurable FPGAs
	the platform lends itself to a prototype implementation.

\section{Preliminary work}
	
	Work has initially focused on developing improvements to neural
	interconnection networks and building infrastructure to enable implementation
	of such improvements within SpiNNaker.
	
	\subsection{SpiNNaker interconnect modelling}
		
		A detailed simulation model of SpiNNaker's interconnect was developed and
		compared with SpiNNaker hardware as part of a collaborative work exploring
		novel hardware-accelerated modelling of computer architectures. The result
		demonstrated a strong correspondence between the simulator and SpiNNaker
		indicating its suitability for use in the development of improvements to
		SpiNNaker's interconnect. This work is due for journal submission in early
		September.
	
	\subsection{Wiring large systems with small-world connectivity}
		
		\begin{figure}
			\center
			\input{figures/spinn-topology}
			
			\caption{2D hexagonal torus topology used in SpiNNaker. Each box is an
			eighteen core SpiNNaker chip. Links at the edges of the network
			wrap-around to connect to those on the other side. Actual networks are
			much larger.}
			\label{fig:spin-topology}
		\end{figure}
		
		HSS technology imposes constraints on the lengths of wires used in large
		systems, for example in SpiNNaker, wires are limited to around 1 metre or
		less \cite{sata3spec}. SpiNNaker's network uses a 2D hexagonal torus
		topology (illustrated in figure \ref{fig:spinn-topology}) which, if laid out
		naively, would require cables long enough to physically span the whole
		system. For the large machine in figure \ref{fig:spinnaker-abstractions},
		this would be over 6 metres. Preliminary work has developed a tool to aid
		the design of alternative physical organisations of SpiNNaker machines (such
		as in the figure) which maintain the same logical connectivity but use wires
		of less than a metre in length.
		
		Watts and Strogatz demonstrated that adding a small number of random links
		to a torus topology can convert it into a `small-world' network
		\cite{watts98}. A well-known example of a small-world network is human
		social networks where one of their most distinctive properties is widely
		known as the theory of `six degrees of separation'. This states that any two
		people are connected by a chain of no more than six acquaintances. This
		property is also desirable in computer networks since it reduces the number
		of `hops' messages must make when travelling through a network. This reduces
		both the latency of messages and also frees up resources on links which are
		avoided \cite{shin11}. This freeing of resources enables the network to
		operate at lower speeds and thus lower power.
		
		Random links added to a network can easily require wires longer than a metre
		and allowing only short random connections was found to prevent the
		small-world effect from occurring. However, when systems were laid out to
		reduce wire lengths, as in the scheme proposed for SpiNNaker, small-world
		networks formed even when only allowing physically short random connections.
	
	
	\subsection{High-speed serial (HSS)}
		
		Preliminary work has also resulted in the development of foundational
		hardware components for implementing new connectivity schemes within
		SpiNNaker's board-to-board interconnect. A proof of concept system has been
		produced to demonstrate these hardware components which has enabled an
		order-of-magnitude bandwidth increase between an external host PC and
		SpiNNaker for certain neural workloads.
		
		These foundational components will be used in upcoming work to extend
		SpiNNaker's board-to-board interconnect.


\section{Research plan}
	
	\begin{figure}
		\center
		\input{figures/plan-gantt}
		
		\caption{Gantt chart overview of research plan. Boxes indicate expected
		duration of a task, thick lines indicate slack and red arrows show
		dependencies between tasks. Note the non-linear scale.}
		\label{fig:plan-gantt}
	\end{figure}
	
	An outline of planned upcoming research is given in figure
	\ref{fig:plan-gantt}. The major components of this plan are outlined in this
	section.
	
	\subsection{Benchmarking}
		
		In order to assess success, a suite of benchmarks is required. A method of
		automatically converting both models developed by neuroscientists and a
		number of synthetic tests for the Neural Engineering Framework (NEF)
		\cite{eliasmith04} into benchmarks has been proposed. This approach ensures
		that the benchmarks will be representative of realistic neural loads while
		also allowing systematic experimentation and exploration of corner cases.
	
	\subsection{Small-world}
		
		Building on preliminary work, models of small world configurations in
		SpiNNaker's network will be modelled and, if found to be effective,
		implementation in SpiNNaker's network will follow. The most significant open
		problem to be solved is the determination of the complexity of routing
		strategy required to usefully exploit small-world connections.
	
	\subsection{HSS power management}
		
		As described earlier, HSS systems present an energy efficiently challenge
		for neural loads due to their load-independent energy consumption and slow
		link speed changes. This work focuses on reducing the time HSS links are
		unavailable during link speed changes making it possible to dynamically
		change link speeds in response to system load. With this in place, the
		reduction in network load yielded by small-world connectivity can be
		exploited to also reduce energy consumption.
		
		\begin{figure}
			\center
			\input{figures/emergency-routing}
			
			\caption{Connectivity between boards (circles) in a SpiNNaker system. A
			transitioning link is avoided by traversing two neighbouring links.
			Wrap-around links are not shown.}
			\label{fig:emergency-routing}
		\end{figure}
		
		Two complementary approaches are being considered, the first involves
		transmitting data redundantly while a link is changing speed. During speed
		changes, the link becomes unreliable; existing systems simply wait until the
		link stabilises at the expense of latency in order to avoid adding
		additional hardware for this special case. In the proposed system, redundant
		transmission of data during link speed changes will be used. One possibility
		is the use of Forward Error Correction (FEC) \cite{hamming50} which allows
		errors to be corrected inexpensively. The second approach is to redirect
		data via an alternative route during link speed changes. This is possible
		because board-to-board links in SpiNNaker are also arranged in a 2D toroidal
		mesh meaning that while a link changes speeds, data can be redirected via
		two neighbouring links as shown in figure \ref{fig:emergency-routing}.
		
		Energy consumption will be measured using the benchmarks described above
		along with the power measurement techniques used by other researchers
		\cite{sharp12,stromatias13}.


\section{Conclusions}
	
	Large scale neural simulations represent a rich opportunity for
	neuroscientists to understand the brain but are held back by the computational
	expense of their execution. While specialised architectures such as SpiNNaker
	have significantly advanced the state of the art, their interconnection
	networks are only beginning to adopt the HSS interconnect technologies which
	have seen heavy investment by the super-computer industry \cite{infinibandta}.
	
	This work aims to develop a new generation of HSS-based networks for neural
	simulators which improve both system performance and power efficiency.
	Preliminary work has developed network modelling tools and proposed a novel
	technique which adds small-world connectivity to HSS networks capable of
	reducing both latency and network load. Planned work will implement this
	small-world connectivity scheme within SpiNNaker's HSS board-to-board
	interconnect and complement this with the development of a power management
	scheme for HSS links which is appropriate for neural systems.
